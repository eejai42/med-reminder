<DrawIOStateMachine>
    <InitialState>Bootup</InitialState>
    <MachineStates>
        <MachineState>
            <Name>AdvanceCurrentReminder</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>AdvanceCurrentReminder</FromStateName>
                    <ActionName>CurrentReminderAdvanced</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputClick</ActionName>
                    <ToStateName>AdvanceCurrentReminder</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>Idle</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>Idle</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>DebounceMovement</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>Idle</FromStateName>
                    <ActionName>MainInputClick</ActionName>
                    <ToStateName>WaitForCommands</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>SetExpectedReminder</FromStateName>
                    <ActionName>ExpectedReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>Record2ndReminderTime</FromStateName>
                    <ActionName>ReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>SetExpectedReminder</FromStateName>
                    <ActionName>ExpectedReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>AdvanceCurrentReminder</FromStateName>
                    <ActionName>CurrentReminderAdvanced</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>MovementDetected</FromStateName>
                    <ActionName>MovementHandled</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>DebounceMovement</FromStateName>
                    <ActionName>DebounceFailed</ActionName>
                    <ToStateName>Idle</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>MovementDetected</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>MovementDetected</FromStateName>
                    <ActionName>MovementHandled</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitForMoreMovement</FromStateName>
                    <ActionName>WheelNotMoved</ActionName>
                    <ToStateName>MovementDetected</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>WaitForCommands</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputDoubleClick</ActionName>
                    <ToStateName>SetExpectedReminder</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputClick</ActionName>
                    <ToStateName>AdvanceCurrentReminder</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputHold</ActionName>
                    <ToStateName>Reboot</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>Idle</FromStateName>
                    <ActionName>MainInputClick</ActionName>
                    <ToStateName>WaitForCommands</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>Reboot</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>Reboot</FromStateName>
                    <ActionName>RebootStarted</ActionName>
                    <ToStateName>Bootup</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputHold</ActionName>
                    <ToStateName>Reboot</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>WaitForMoreMovement</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>WaitForMoreMovement</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>CountMovement</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>WaitForMoreMovement</FromStateName>
                    <ActionName>WheelNotMoved</ActionName>
                    <ToStateName>MovementDetected</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>CountMovement</FromStateName>
                    <ActionName>MovementCounted</ActionName>
                    <ToStateName>WaitForMoreMovement</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>CountMovement</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>CountMovement</FromStateName>
                    <ActionName>MovementCounted</ActionName>
                    <ToStateName>WaitForMoreMovement</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>DebounceMovement</FromStateName>
                    <ActionName>DebouncePassed</ActionName>
                    <ToStateName>CountMovement</ToStateName>
                </ToTransition>
                <ToTransition>
                    <FromStateName>WaitForMoreMovement</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>CountMovement</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>Bootup</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>Bootup</FromStateName>
                    <ActionName>BootupComplete</ActionName>
                    <ToStateName>RecordCurrentSlice</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>Reboot</FromStateName>
                    <ActionName>RebootStarted</ActionName>
                    <ToStateName>Bootup</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>WaitFor1stReminderTime</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>WaitFor1stReminderTime</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>Record1stReminderTime</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>RecordCurrentSlice</FromStateName>
                    <ActionName>SetupComplete</ActionName>
                    <ToStateName>WaitFor1stReminderTime</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>RecordCurrentSlice</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>RecordCurrentSlice</FromStateName>
                    <ActionName>SetupComplete</ActionName>
                    <ToStateName>WaitFor1stReminderTime</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>Bootup</FromStateName>
                    <ActionName>BootupComplete</ActionName>
                    <ToStateName>RecordCurrentSlice</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>Record1stReminderTime</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>Record1stReminderTime</FromStateName>
                    <ActionName>ReminderSet</ActionName>
                    <ToStateName>WaitFor2ndReminderTime</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitFor1stReminderTime</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>Record1stReminderTime</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>DebounceMovement</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>DebounceMovement</FromStateName>
                    <ActionName>DebouncePassed</ActionName>
                    <ToStateName>CountMovement</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>DebounceMovement</FromStateName>
                    <ActionName>DebounceFailed</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>Idle</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>DebounceMovement</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>WaitFor2ndReminderTime</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>WaitFor2ndReminderTime</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>Record2ndReminderTime</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>Record1stReminderTime</FromStateName>
                    <ActionName>ReminderSet</ActionName>
                    <ToStateName>WaitFor2ndReminderTime</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>Record2ndReminderTime</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>Record2ndReminderTime</FromStateName>
                    <ActionName>ReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitFor2ndReminderTime</FromStateName>
                    <ActionName>WheelMoved</ActionName>
                    <ToStateName>Record2ndReminderTime</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
        <MachineState>
            <Name>SetExpectedReminder</Name>
            <FromTransitions>
                <FromTransition>
                    <FromStateName>SetExpectedReminder</FromStateName>
                    <ActionName>ExpectedReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
                <FromTransition>
                    <FromStateName>SetExpectedReminder</FromStateName>
                    <ActionName>ExpectedReminderSet</ActionName>
                    <ToStateName>Idle</ToStateName>
                </FromTransition>
            </FromTransitions>
            <ToTransitions>
                <ToTransition>
                    <FromStateName>WaitForCommands</FromStateName>
                    <ActionName>MainInputDoubleClick</ActionName>
                    <ToStateName>SetExpectedReminder</ToStateName>
                </ToTransition>
            </ToTransitions>
        </MachineState>
    </MachineStates>
</DrawIOStateMachine>